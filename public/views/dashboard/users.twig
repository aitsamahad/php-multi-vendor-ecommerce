{% extends './dashboard/templates/app.twig' %}

{% block content %}
<div class="content-wrapper" style="min-height: 1200.88px;">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Users</h1> <br> <a href="{{ path_for('dashboard.users.add') }}"><button class="btn btn-info">New User</button></a>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Users</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Users List</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
                    {% if flash.getMessage('Success') %}
                      <div class="alert alert-success"><i class="fa fa-check-circle"></i> {{ flash.getMessage('Success') | first }}</div>
                    {% endif %}
          
                    {% if flash.getMessage('Danger') %}
                      <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ flash.getMessage('Danger') | first }}</div>
                    {% endif %}
              <div id="example1_wrapper" class="dataTables_wrapper dt-bootstrap4"><div class="row"><div class="col-sm-12 col-md-6"><div class="dataTables_length" id="example1_length"></div></div><div class="col-sm-12 col-md-6"><div id="example1_filter" class="dataTables_filter"></div></div></div><div class="row"><div class="col-sm-12"><table id="example1" class="table table-bordered table-striped dataTable dtr-inline" role="grid" aria-describedby="example1_info">
                <thead>
                <tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Vendor Name: activate to sort column descending" aria-sort="ascending">User Name</th><th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Store Name: activate to sort column ascending">User Email</th><th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Operations: activate to sort column ascending">Operations</th><th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Total Products: activate to sort column ascending">is Seller?</th><th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Created At: activate to sort column ascending">Created At</th></tr>
                </thead>
                <tbody>
                {% for user in users %}
                <tr role="row" class="odd">
                  <td tabindex="0" class="sorting_1">{{ user.u_name }}</td>
                  <td>{{ user.u_email }}</td>
                  <td>
                   <a href="{{ path_for('dashboard.users.delete', {'u_id': user.u_id}) }}"><button type="button" class="btn btn-danger"><li class="fas fa-remove"></li>Remove User</button></a>
                  </td>
                  <td>
                  {% if user.u_vendor is same as (1) %}
                  YES
                  {% else %}
                  NO
                  {% endif %}
                  </td>
                  <td>{{ user.created_at }}</td>
                </tr>
                {% endfor %}
                </tbody>
              </table></div></div></div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    </section>
    <!-- /.content -->
  </div>


  <script>

function preview_image() 
{
 var total_file=document.getElementById("customFile").files.length;
 for(var i=0;i<total_file;i++)
 {
  $('#image_preview').empty();
  $('#image_preview').append("<img src='"+URL.createObjectURL(event.target.files[i])+"' width='100%'><br>");
 }
}
</script>

{% endblock %}